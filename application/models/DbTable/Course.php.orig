<?php

class Application_Model_DbTable_Course extends Zend_Db_Table_Abstract
{

    protected $_name = 'course';

    function listCourses(){
		return $this->fetchAll()->toArray();
	}

<<<<<<< HEAD
    function addCourse($courseInfo,$date,$cat_id,$admin_id){
	
	$row = $this->createRow();
	$row->name = $courseInfo['name'];
    $row->date = $date;
	$row->cat_id = 1;
	$row->image=$courseInfo['image'];
	$row->summary=$courseInfo['summary'];
	$row->admin_id = 1;

	return $row->save();
=======
    function addCourse($courseInfo,$cat_id,$admin_id){
		$row = $this->createRow();
		$row->name = $courseInfo['name'];
		$date = Zend_Date::now();
		$row->time = $date;
		$row->cat_id = $courseInfo['cat_id'];
		$row->admin_id = 1;
		return $row->save();
>>>>>>> 7daf2ec92d3ba3d6a3c985cc8871da19bd05d0e0
	}

	function deleteCourse($id){
		return $this->delete('id='.$id);
	}

	function editCourse($id,$data){
		return $this->update($data,"id=$id");
	}

	function getCourseById($id){
		return $this->find($id)->toArray();
	}

	function getCourseCat(){

		$select = $this->select()->setintegritycheck(false)
		->from('course')
     	->join('category','')
     	->where('category.id = course.cat_id');
        return $this->fetchAll($select)->toArray();
	}
	function getCat(){
		$cat = new Application_Model_DbTable_Category();
		$select = $cat->select("*")
						->from('category');
		return $this->fetchAll($select)->toArray();
	}

}

